<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»åƒå¤‰æ›è©³ç´°</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>
        <nav class="header">
            <a href = "{{ url_for('login.index', user_name = user_name) }}">

                <div class="logo">ğŸ“·</div>
            </a>
            <div class="sign">
                <a href="{{ url_for('login.logout') }}">
                    <button class="button">Logout</button>
                </a>
            </div>
        </nav>
    </header>

    <main>
        <div class="history-grid">
            <img src="{{ url_for('static', filename = 'img.png')}}" class="img-origin">
        </div>
        <section class="product-detail">


            <div class="image-preview">
                {% if file_exists %}
                <img src="{{ url_for('static', filename = 'output.png')}}" class="image-preview">
                {% endif %}
            </div>


            <div class="file-info">
                <p>{{ img_name }}</p>
                <span class="tag">Tag</span>
                <label for="transform-method">å¤‰æ›æ–¹æ³•ã‚’é¸æŠ</label>


                <!--ç”»åƒå¤‰æ›-->
                <form action="{{ url_for('change.conv') }}" method="POST">

                <select id="transform-method" name="selected_option">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <!-- ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ  -->
                    <option value="1">ãƒã‚¬ãƒã‚¸å¤‰æ›</option>
                    <option value="2">ãƒ¢ã‚¶ã‚¤ã‚¯å‡¦ç†</option>
                    <option value="3">ã‚¬ã‚¦ã‚·ã‚¢ãƒ³ãƒ•ã‚£ãƒ«ã‚¿</option>
                    <option value="4">äºŒå€¤åŒ–å‡¦ç†</option>
                    <option value="5">ã‚¨ãƒƒã‚¸å‡¦ç†</option>
                    <option value="6">è‰²å½©å‡¦ç†</option>
                    <option value="7">å·¦å³åè»¢å‡¦ç†</option>
                </select>
                <!-- ãƒ¢ã‚¶ã‚¤ã‚¯å¼·åº¦å…¥åŠ› -->
                    <div id="mosaic-strength-container" style="display: none;">
                        <label for="mosaic-strength">ãƒ¢ã‚¶ã‚¤ã‚¯å¼·åº¦</label>
                        <input type="number" id="mosaic-strength" name="mosaic_strength" min="1" value="10" required>
                    </div>
                <button>å¤‰æ›</button>

                </form>

                <script>
                    // ãƒ¢ã‚¶ã‚¤ã‚¯å‡¦ç†é¸æŠæ™‚ã«å¼·åº¦å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¡¨ç¤º
                    const transformMethod = document.getElementById('transform-method');
                    const mosaicStrengthContainer = document.getElementById('mosaic-strength-container');

                    transformMethod.addEventListener('change', function () {
                        if (transformMethod.value === '2') {
                            mosaicStrengthContainer.style.display = 'block';
                        } else {
                            mosaicStrengthContainer.style.display = 'none';
                        }
                    });
                </script>

                <textarea placeholder="å¤‰æ›ã®èª¬æ˜">{{message}}</textarea>

                <!--ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰-->
                <form action="{{ url_for('change.download') }}" method="POST">
                    <button>ä¿å­˜</button>
                </form>
            </div>


            <!--ã®ã¡ã«å±¥æ­´ä½œæˆã™ã‚‹-->
        </section>
        <a href="{{ url_for('login.index', user_name = user_name) }}">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
        <section class="history">
            <h2>å±¥æ­´</h2>
            <div class="history-grid">
                {% if histories %}
                {% for history in histories %}
                <img src="data:image/png;base64,{{ history.image_data.decode('utf-8') }}" class="history-item">
                {% endfor %}
                {% else %}
                <div class="history-item"></div>
                <div class="history-item"></div>
                {% endif %}
            </div>
            <div class="pagination">
                <a href="#">&laquo;</a>
                <a href="#">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <!-- ä»–ã®ãƒšãƒ¼ã‚¸ç•ªå· -->
                <a href="#">&raquo;</a>
            </div>
        </section>
    </main>
</body>

</html>